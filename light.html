<!DOCTYPE html>
<html lang="en">
<head>
	<title>XYZ</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<link href="css/style.css" rel="stylesheet"/>
	<link href="css/bootstrap-square.css" rel="stylesheet"/>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

</head>

<body>

<div class="container">

	<div class="navbar navbar-inverse sharp-edge">
		<div class="container-fluid">
			<div class="navbar-header">
				<a class="navbar-brand" href="index.html">XYZ Home Automation</a>
			</div>

			<div class="nav navbar-nav navbar-right">
				<li><a><span class="glyphicon glyphicon-list"></span></a></li>
			</div>
		</div>
	</div>
	
	<div class="container-fluid page-border no-padding">
	
		<div class="row bottom-border" style="width:100%; margin-left:0px;">
			<div class="col-xs-12">
				<h2>Lights</h2>
			</div>
		</div>
	
		<div class="row">
		
			<div class="col-xs-3 right-border" style="padding-right:0px">
				<div class="list-group no-margin">
					<div onclick="loadControl(this);" id="kitchen" class="list-group-item">Kitchen <span class="glyphicon glyphicon-flash pull-right" style="font-size:20px"></span></div>
					<div onclick="loadControl(this);" id="dining" class="list-group-item">Dining Room <span class="glyphicon pull-right" style="font-size:20px"></span></div>
					<div onclick="loadControl(this);" id="study" class="list-group-item">Study Room <span class="glyphicon pull-right" style="font-size:20px"></span></div>
					<div onclick="loadControl(this);" id="garage" class="list-group-item">Garage <span class="glyphicon pull-right" style="font-size:20px"></span></div>
					<div onclick="loadControl(this);" id="living" class="list-group-item">Living Room <span class="glyphicon pull-right" style="font-size:20px"></span></div>
					<div onclick="loadControl(this);" id="guest" class="list-group-item">Guest Room <span class="glyphicon pull-right" style="font-size:20px"></span></div>
					<div onclick="loadControl(this);" id="master" class="list-group-item">Master Bedroom <span class="glyphicon pull-right" style="font-size:20px"></span></div>
					<div onclick="loadControl(this);" id="tony" class="list-group-item">Tony's Bedroom <span class="glyphicon pull-right" style="font-size:20px"></span></div>
					<div onclick="loadControl(this);" id="wanda" class="list-group-item">Wanda's Bedroom <span class="glyphicon pull-right" style="font-size:20px"></span></div>
				</div>
			</div>
			
			<div id="lightControl" class="col-xs-9"></div>

		</div>

	</div>
	
</div>

<script>
var currentRoom = null;
var currentControl = null;
var custom;

function lightOff(e){
	var temp = "#" + currentRoom + " > span.glyphicon-flash";
	$(temp).removeClass("glyphicon-flash");
	
	$(".btn-block").removeClass("active-button");
	$(e).addClass("active-button");
}

function lightOn(e){
	var temp = "#" + currentRoom + " > span";
	$(temp).addClass("glyphicon-flash");

	$(".btn-block").removeClass("active-button");
	$(e).addClass("active-button");
}

function loadControl(e){

	currentControl = JSON.stringify($("#lightControl").html());
	localStorage[currentRoom] = currentControl;
	custom = $("#light").value;
	currentRoom = e.id;
	
	if (localStorage[currentRoom] != null && localStorage[currentRoom] != ""){ //load cached
		currentControl = JSON.parse(localStorage[currentRoom]);
		$("#lightControl").html(currentControl);
		$("#light").value = custom;
		
	} else {	//load new
		$("#lightControl").load("http://homeauto.azurewebsites.net/lightControl.html");
	}
	
}

function toggleButton(e){
	var temp = e.value;
	
	if (temp != null && temp != ""){
		$('#custom').removeClass("disabled");
	} else {
		$('#custom').addClass("disabled");
	}

}

function disableButton(){
	var temp = this.value;
	
	if (!temp){
		$('#custom').addClass("disabled");
	}
}
</script>

</body>

</html>
